---
title: "レンダーとコミット"
---

## 🌱 レンダーされるタイミング

`React`コンポーネントは、次のようなタイミングで **レンダー**（関数としての呼び出し）が行われます。

:::message
**ポイント**
1. コンポーネントの初回表示時
2. コンポーネント自身、または親コンポーネントの `state` や `props` が更新されたとき
:::

ここでいう「レンダー」とは、**画面に即座に反映されること**ではなく、
「**UI がどうあるべきかを計算する処理**」を指します。

## 🌱 コンポーネントの初回呼び出し（初回レンダー）

React アプリでは、最初に表示するコンポーネントを `createRoot` と `render` を使って指定します。

```jsx
import Image from './Image.js';
import { createRoot } from 'react-dom/client';

const root = createRoot(document.getElementById('root'))
root.render(<Image />);

```

このときに起こることは次の通りです。
1. `<Image />`コンポーネント関数が呼び出される
2. JSX が評価され、「どんな DOM を作るか」が計算される
3. 計算結果をもとに、実際の DOM が作成され画面に表示される
この 初回の`DOM`反映までを含めて、`React`では「初回レンダー」と呼びます。

## 🌱 コンポーネントのstat更新による再レンダー
`useState`などの`set`関数を使って state を更新すると、再レンダーが発生します。

```jsx
setCount(count + 1);
```

:::message
**ポイント**
再レンダー時、React は前回のレンダー結果と今回のレンダー結果を比較し、
変更が必要な部分だけを DOM に反映します。
:::

## 🌱 レンダーとコミットの違い
`React`の更新処理は、大きく次の 2段階に分かれています。

| フェーズ | 内容                       |
| ---- | ------------------------ |
| レンダー | JSX を評価し、「どこが変わったか」を計算する |
| コミット | 計算結果をもとに、実際の DOM を更新する   |

そのため、
- レンダーは発生しても
- DOM が更新されない（見た目が変わらない）
というケースもあります。
